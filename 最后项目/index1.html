<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GeoViz Earth</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="./本地/font-awesome.min.css" rel="stylesheet">
    <!-- 引入Three.js -->
    <script src="./本地/three.min.js"></script>
    <!-- 引入轨道控制器，优化交互体验 -->
    <script src="./本地/OrbitControls.js"></script>

    <!-- Tailwind 配置 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#165DFF',
                        secondary: '#36BFFA',
                        accent: '#06B6D4',
                        dark: '#0A0F1C',
                        space: '#0F172A'
                    },
                    fontFamily: {
                        inter: ['Inter', 'system-ui', 'sans-serif'],
                    },
                },
            }
        }
    </script>

    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .glow {
                filter: drop-shadow(0 0 15px rgba(22, 93, 255, 0.5));
            }
            .btn-pulse {
                animation: pulse 2s infinite;
            }
            @keyframes pulse {
                0% {
                    box-shadow: 0 0 0 0 rgba(22, 93, 255, 0.7);
                }
                70% {
                    box-shadow: 0 0 0 10px rgba(22, 93, 255, 0);
                }
                100% {
                    box-shadow: 0 0 0 0 rgba(22, 93, 255, 0);
                }
            }
            /* 修改星空背景样式 */
            .stars {
                background-image: url('https://images.unsplash.com/photo-1506318137071-a8e063b4bec0'); /* 替换为你的星空图片 URL */
                background-size: cover;
                background-repeat: no-repeat;
                background-position: center;
            }
        }

        /* Navigation bar styles */
        nav {
            position: fixed;
            top: 0;
            width: 100%;
            padding: 20px 40px; /* Adjusted padding for better spacing */
            display: flex;
            justify-content: flex-end; /* Align items to the end (right) */
            align-items: center;
            z-index: 100;
            background: linear-gradient(to bottom, rgba(5, 7, 17, 0.8), transparent);
        }
        /* Removed .logo styles as the element is removed */
        .nav-links {
            display: flex;
            gap: 30px;
        }
        .nav-links a {
            color: #bbe1fa; /* Changed to #bbe1fa */
            text-decoration: none;
            font-size: 1rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            position: relative;
            padding: 5px 0;
        }
        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--accent-blue); /* Ensures consistent color with planets.html */
            transition: width 0.3s ease;
        }
        .nav-links a:hover::after {
            width: 100%;
        }
    </style>
</head>

<body class="bg-dark text-white font-inter overflow-hidden h-screen">
<!-- 星空背景 -->
<div class="fixed inset-0 stars opacity-60 z-0"></div>

<!-- 渐变背景层 -->
<div class="fixed inset-0 bg-gradient-to-b from-space/20 via-dark/30 to-dark/40 z-0"></div>

<!-- 装饰性光晕 -->
<div class="fixed top-1/4 left-1/4 w-96 h-96 bg-primary/20 rounded-full blur-[100px]"></div>
<div class="fixed bottom-1/3 right-1/3 w-80 h-80 bg-accent/20 rounded-full blur-[100px]"></div>

<!-- 导航栏 -->
<nav>
    <!-- Removed <div class="logo">星穹万象</div> -->
    <div class="nav-links">
        <a href="index.html">行星系统</a>
        <a href="planets-2.html" onclick="location.href='planets-2.html';">3D模型</a>

        <a href="http://127.0.0.1:3000/star-map.html">星穹万象</a>
        <a href="games.html">月相日历</a>
    </div>
</nav>

<!-- 3D地球容器 -->
<div id="earth-container" class="absolute inset-0 z-10"></div>

<!-- 主内容 -->
<div class="relative z-10 h-screen flex flex-col items-start justify-center pl-40">
    <h1 class="mt-6 text-4xl md:text-6xl font-bold bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent tracking-tight font-orbitron">
        探索宇宙的无限奥秘
    </h1>
    <p class="mt-3 text-gray-300 max-w-md text-base md:text-lg font-exo2">
        “我们因凝视星辰才是人类，还是因为我们是人类才凝视星辰？”
    </p>
    <p class="text-gray-300 max-w-md text-base md:text-lg font-exo2">
        这个问题毫无意义，真正的问题应该是：
    </p>
    <p class="text-gray-300 max-w-md text-base md:text-lg font-exo2">
        “星辰是否回望我们？”
    </p>
    <a href="index.html" class="px-8 py-4 bg-primary hover:bg-primary/90 text-white font-semibold rounded-full text-lg shadow-lg shadow-primary/20 transition-all duration-300 transform hover:-translate-y-1 btn-pulse mt-8">
        开始探索 <i class="fa fa-arrow-right ml-2"></i>
    </a>
</div>

<!-- 底部装饰线条 -->
<div class="absolute bottom-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-primary/30 to-transparent z-10"></div>

<script>
    // 3D地球初始化
    document.addEventListener('DOMContentLoaded', () => {
        // 创建场景
        const scene = new THREE.Scene();

        // 创建相机
        const camera = new THREE.PerspectiveCamera(
            75,
            window.innerWidth / window.innerHeight,
            0.1,
            1000
        );
        camera.position.z = 5;

        // 创建渲染器
        const renderer = new THREE.WebGLRenderer({
            antialias: true,
            alpha: true
        });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(window.devicePixelRatio);
        // 启用色调映射，提升视觉效果
        renderer.toneMapping = THREE.ACESFilmicToneMapping;
        renderer.outputEncoding = THREE.sRGBEncoding;

        // 将渲染器添加到容器
        const container = document.getElementById('earth-container');
        container.appendChild(renderer.domElement);

        // 添加轨道控制器，优化交互体验
        const controls = new THREE.OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true; // 启用阻尼效果，使旋转更平滑
        controls.dampingFactor = 0.05;
        controls.rotateSpeed = 0.3; // 旋转速度
        controls.zoomSpeed = 0.7; // 缩放速度

        // 创建地球几何体（增加分段数，使地球更平滑）
        const geometry = new THREE.SphereGeometry(2, 128, 128);

        // 创建地球材质 - 使用高质量地球纹理
        const textureLoader = new THREE.TextureLoader();

        // 加载高清晰度地球纹理
        const earthTexture = textureLoader.load('https://cdn.jsdelivr.net/gh/mrdoob/three.js@r128/examples/textures/planets/earth_atmos_2048.jpg');
        const earthNormalMap = textureLoader.load('https://cdn.jsdelivr.net/gh/mrdoob/three.js@r128/examples/textures/planets/earth_normal_2048.jpg');
        const earthSpecularMap = textureLoader.load('https://cdn.jsdelivr.net/gh/mrdoob/three.js@r128/examples/textures/planets/earth_specular_2048.jpg');
        const earthClouds = textureLoader.load('https://cdn.jsdelivr.net/gh/mrdoob/three.js@r128/examples/textures/planets/earth_clouds_1024.png');

        // 设置纹理属性，使纹理正确映射
        earthTexture.anisotropy = renderer.capabilities.getMaxAnisotropy();
        earthNormalMap.anisotropy = renderer.capabilities.getMaxAnisotropy();
        earthSpecularMap.anisotropy = renderer.capabilities.getMaxAnisotropy();
        earthClouds.anisotropy = renderer.capabilities.getMaxAnisotropy();

        // 地球材质
        const material = new THREE.MeshPhongMaterial({
            map: earthTexture,               // 基础纹理（地表颜色）
            normalMap: earthNormalMap,       // 法线贴图（增强地形细节）
            normalScale: new THREE.Vector2(0.85, 0.85),
            specularMap: earthSpecularMap,   // 高光贴图（模拟海洋反光）
            specular: new THREE.Color(0x222222),
            shininess: 25,                   // 高光强度
            color: new THREE.Color(0x808080) // 调整颜色为较深的灰色
        });

        // 创建地球网格
        const earth = new THREE.Mesh(geometry, material);
        // 将地球向右移动 0.3 个单位
        earth.position.x = 1.3;
        scene.add(earth);

        // 创建云层（单独的网格，实现更真实的云层效果）
        const cloudGeometry = new THREE.SphereGeometry(2.03, 128, 128);
        const cloudMaterial = new THREE.MeshStandardMaterial({
            map: earthClouds,
            transparent: true,
            opacity: 0.8,
            blending: THREE.AdditiveBlending,
            side: THREE.DoubleSide,
            depthWrite: false // 避免云层遮挡地球
        });
        const clouds = new THREE.Mesh(cloudGeometry, cloudMaterial);
        // 同步云层的位置
        clouds.position.x = 1.3;
        scene.add(clouds);

        // 添加大气效果
        const atmosphere = new THREE.Mesh(
            new THREE.SphereGeometry(2.1, 128, 128),
            new THREE.ShaderMaterial({
                vertexShader: `
            varying vec3 vNormal;
            void main() {
              vNormal = normalize(normalMatrix * normal);
              gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
            }
          `,
                fragmentShader: `
            varying vec3 vNormal;
            void main() {
              float intensity = pow(0.8 - dot(vNormal, vec3(0, 0, 1.0)), 4.0);
              gl_FragColor = vec4(0.2, 0.5, 1.0, 0.8) * intensity;
            }
          `,
                side: THREE.BackSide,
                blending: THREE.AdditiveBlending,
                transparent: true
            })
        );
        // 同步大气的位置
        atmosphere.position.x = 1.3;
        scene.add(atmosphere);

        // 添加光源（多光源组合，增强真实感）
        const ambientLight = new THREE.AmbientLight(0x1a237e, 0.2); // 降低环境光强度
        scene.add(ambientLight);

        const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8); // 降低主光源强度
        directionalLight.position.set(5, 3, 5);
        scene.add(directionalLight);

        // 添加辅助光源，增强细节表现
        const hemiLight = new THREE.HemisphereLight(0x0000ff, 0x00ff00, 0.1); // 降低辅助光源强度
        scene.add(hemiLight);

        // 地球旋转动画
        function animate() {
            requestAnimationFrame(animate);

            // 地球自转
            earth.rotation.y += 0.0005;
            // 云层以不同速度旋转，增强真实感
            clouds.rotation.y += 0.0008;

            // 更新控制器
            controls.update();

            renderer.render(scene, camera);
        }
        animate();

        // 窗口大小调整
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
    });
</script>
</body>

</html>
